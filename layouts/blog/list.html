{{ define "main" }}
<section class="pt-10 md:pt-14">
  <div class="max-w-5xl mx-auto px-4">
    <h1 class="text-3xl font-semibold tracking-tight">Regnskapsblogg</h1>
    {{/* Fetch the accounting subsection under blog and paginate its pages */}}
    {{ $regnskap := site.GetPage "section" "blog/regnskap" }}
    {{ $pages := slice }}
    {{ with $regnskap }}
      {{ $pages = .RegularPages.ByDate.Reverse }}
    {{ end }}
    {{ if gt (len $pages) 0 }}
      {{ $p := .Paginate $pages }}
      <div class="mt-8 space-y-6">
        {{ range $p.Pages }}
        {{ $pg := . }}
        <article class="rounded-xl ring-1 ring-gray-200 bg-white p-5 flex gap-4">
          {{ with $pg.Params.featured_image }}
            {{ $img := $pg.Resources.GetMatch . }}
            {{ if $img }}
              <img src="{{ $img.RelPermalink }}" alt="{{ with $pg.Params.featured_image_alt }}{{ . }}{{ else }}Illustrasjon{{ end }}" class="w-16 h-16 object-contain" />
            {{ else }}
              <img src="{{ printf "%s%s" $pg.RelPermalink . }}" alt="{{ with $pg.Params.featured_image_alt }}{{ . }}{{ else }}Illustrasjon{{ end }}" class="w-16 h-16 object-contain" />
            {{ end }}
          {{ end }}
          <div>
            <h2 class="text-xl font-semibold"><a href="{{ $pg.RelPermalink }}">{{ $pg.Title }}</a></h2>
            {{ with $pg.Params.summary }}<p class="text-gray-700 mt-1">{{ . }}</p>{{ end }}
          </div>
        </article>
        {{ end }}
      </div>
      {{ if gt $p.TotalPages 1 }}
      <nav class="mt-8 flex items-center justify-center gap-3 text-sm">
        {{ with $p.Prev }}<a class="px-3 py-1 rounded ring-1 ring-gray-300 hover:bg-gray-50" href="{{ .URL }}">Previous</a>{{ end }}
        <span class="px-3 py-1">Page {{ $p.PageNumber }} of {{ $p.TotalPages }}</span>
        {{ with $p.Next }}<a class="px-3 py-1 rounded ring-1 ring-gray-300 hover:bg-gray-50" href="{{ .URL }}">Next</a>{{ end }}
      </nav>
      {{ end }}
    {{ else }}
      <div class="mt-8">
        <p class="text-gray-600">No accounting articles found.</p>
      </div>
    {{ end }}
  </div>
</section>
{{ end }}
